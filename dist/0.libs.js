webpackJsonp([0],[,,,,,,,,,,,function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(){var e=new window.DataTable({meta:{id:"",name:"",industry:"",area:"",types:"",state:"",priceArea:""}}),t=new window.DataTable({meta:{id:"",materialName:""}}),i={id:l.default.observable(),checkboxValue:l.default.observableArray(),isShowRefer:l.default.observable(!1),isShowAssigned:l.default.observable(!1),priceAreaValue:l.default.observable(2),invitedSupplyList:l.default.observableArray(),MaterialList:l.default.observableArray(),handleSupplyApplyChange:function(){i.isShowRefer(!0)},handleInviteSupplier:function(){i.isShowRefer(!0)},handleAssignArea:function(){i.isShowAssigned(!0)},priceAreaList:[{value:1,label:"按供货目录分配"},{value:2,label:"手动分配"},{value:3,label:"不限定报价范围"}],rows:e.rows,rowsAssign:t.rows,columnsAssign:[{title:"",type:"checkbox",width:60},{title:"物料名称",width:"20%",field:"productName",type:"render",renderFn:function(e){var t="<div>"+e.productName+"</div>";return t+='<div class="y-text-assist">'+e.productDesc()+"</div>"}},{title:"采购数量",width:"10%",field:"purchaseamount",type:"render",renderFn:function(e){return e.purchaseamount+e.unit}},{title:"建议供应商",width:"10%",field:"suggestSupplierName"},{title:"需求组织/计划员/计划部门",width:"20%",field:"reqOrgName"},{title:"需求时间",width:"10%",field:"reqdate"},{title:"备注",width:"20%",field:"bmemo"}],columns:[{title:"",type:"checkbox",width:60},{title:"供应商",field:"name",width:"20%"},{title:"所属行业",field:"industry",width:"20%"},{title:"所属地区",field:"area",width:"15%"},{title:"经营模式",field:"types",width:"15%"},{title:"已分配/采购",field:"state",width:"15%",type:"component",compFn:function(e){return{name:"y-supplylistoper",params:{row:e}}}},{title:"",field:"priceArea",width:"15%",type:"operation",operationList:[{title:"取消邀请",click:function(e,t){return alert("无法取消"),!1}}]}]};i.MaterialList.push({productName:"PROD002901",pritemid:"101",productDesc:l.default.observable("物料描述"),purchaseamount:12,unit:"元",suggestSupplierName:"建议供应闪",id:l.default.observable("1"),plannerName:"计划员",planDeptName:"计划部门",reqdate:l.default.observable("2014-01-01"),bmemo:l.default.observable("行备注"),reqOrgName:l.default.observable("需求组织名称"),puorgDocName:l.default.observable("采购组织名称"),pureqid:l.default.observable(1),productSpec:l.default.observable("商品规格"),productType:l.default.observable("商品型号"),quotaUnit:l.default.observable("报价单位"),productCode:"物料编码"}),i.invitedSupplyList.subscribe(function(t){e.setSimpleData(t)}),i.priceAreaValue.subscribe(function(e){2===e?window.ycloud.$refs.invitedGrid.setColVisibleByField("state",!0):window.ycloud.$refs.invitedGrid.setColVisibleByField("state",!1)}),l.default.applyBindings(i,document.getElementById("app")),window.vm=i}Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),l=_interopRequireDefault(a);i(23),i(29);var n=i(31),s=_interopRequireDefault(n);t.default={init:init,template:s.default}},,,,,,,,,,,,function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){this.curIndex=l.default.observable(0),this.tabIndex=l.default.observable(1),this.isShowRefer=e.isShowRefer,this.materialList=e.materialList||l.default.observableArray(),this.handleFinish=function(){this.isShowRefer(!1)}.bind(this),this.items=l.default.observableArray([{title:"手工选择",state:1},{title:"从供货目录选择",state:2}]),this.handleTabChange=function(e){this.tabIndex(e.state)}.bind(this),this.invitedSupplyList=e.invitedSupplyList||l.default.observableArray([]),this.allSupplyCount=l.default.computed(function(){return this.invitedSupplyList().length}.bind(this))}var a=i(0),l=_interopRequireDefault(a),n=i(24),s=_interopRequireDefault(n);i(25),i(27),l.default.components.register("y-supplychoose",{viewModel:init,template:s.default})},function(e,t){e.exports='<y-boxfilter>\n  <y-state-tabs params="style:{marginBottom:0},handler: $parent.handleTabChange, index: $parent.curIndex, items: $parent.items, hideNum:true"></y-state-tabs>\n  <div class="pull-right">\n    <span style="margin-right: 10px">已邀请 <span data-bind="text:$parent.allSupplyCount"></span> 名供应商</span>\n    <y-button params="type:\'primary\',click:$parent.handleFinish">&nbsp;&nbsp;完成&nbsp;&nbsp;</y-button>\n  </div>\n</y-boxfilter>\n<y-boxcontent data-bind="visible: tabIndex() == 1">\n  <y-manual params="invitedSupplyList:$parent.invitedSupplyList"></y-manual>\n</y-boxcontent>\n<y-boxcontent data-bind="visible: tabIndex() == 2">\n  <y-fromcategory params="materialList: $parent.materialList,invitedSupplyList:$parent.invitedSupplyList">\n\n  </y-fromcategory>\n</y-boxcontent>\n'},function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){this.columns=[{title:"供应商名称",field:"name",width:"26%"},{title:"所属行业",field:"industry",width:"20%"},{title:"所属地区",field:"area",width:"16%"},{title:"经营模式",field:"types",width:"27%"},{field:"id",title:"操作",type:"operation",operationList:[{title:"邀请",click:function(e){e._selected(!0),this.invitedSupplyList.push(e)}.bind(this),visible:function(e){return!e._selected()}},{title:"已邀请",click:function(e,t){e._selected(!1);var i=this.invitedSupplyList.indexOf(e);this.invitedSupplyList.splice(i,1)}.bind(this),visible:function(e){return e._selected()}}]}],this.rows=l.default.observableArray(),this.supplyList=[{value:1,label:"已交易供应商"},{value:2,label:"自有合格供应商"},{value:3,label:"供货目录供应商"},{value:4,label:"待准入供应商"},{value:5,label:"盘外供应商"}],this.areaList=[{value:1,label:"北京"},{value:2,label:"上海"},{value:3,label:"天津"}],this.invitedSupplyList=e.invitedSupplyList||l.default.observableArray(),this.selectedIds=l.default.computed(function(){return this.invitedSupplyList().map(function(e){return e.id})}.bind(this)),this.setDataSelected=function(e,t){t.forEach(function(i){t._selected=e.indexOf(t.id)>=0})},this.loadData=function(e){var t=[{id:1,name:"用友网络科技股份有限公司",industry:"IT，软件，硬件，云服务",area:"北京",types:"服务方式"}];this.setDataSelected(this.selectedIds(),t),this.rows(t)}.bind(this),this.loadData()}var a=i(0),l=_interopRequireDefault(a),n=i(26),s=_interopRequireDefault(n);l.default.components.register("y-manual",{viewModel:init,template:s.default})},function(e,t){e.exports='<div class="row">\n  <div class="col-md-2" style="margin-bottom: 10px">\n    <y-select params="placeholder:\'备选供应商\', dataList: supplyList"></y-select>\n  </div>\n  <div class="col-md-2">\n    <y-input params="placeholder:\'供应商名称\'"></y-input>\n  </div>\n  <div class="col-md-2">\n    <y-select params="placeholder:\'所属地区\', dataList: areaList"></y-select>\n  </div>\n  <div class="col-md-12">\n    <y-grid params="columns: columns, rows: rows"></y-grid>\n  </div>\n</div>\n'},function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){this.invitedSupplyList=e.invitedSupplyList||l.default.observableArray(),this.supplyLevelList=l.default.observableArray(),this.supplyLevel=l.default.observable({}),this.levelList=l.default.observableArray(),this.levels=l.default.observableArray(),this.isShowSearch=l.default.observable(!0),this.registerMoney=l.default.observable(),this.levelDisabled=l.default.observable(!0),this.targetOrgVisible=l.default.observable(!1),this.targetOrg=l.default.observable(1),this.supplyRows=l.default.observableArray(),this.supplyCols=[{title:"供应商名称",field:"name",width:"26%"},{title:"所属行业",field:"industry",width:"20%"},{title:"所属地区",field:"area",width:"16%"},{title:"经营模式",field:"types",width:"12%"},{title:"资质",field:"types",width:"13%"}],this.materialList=e.materialList||l.default.observableArray(),this.handleSearch=function(){this.isShowSearch(!1)}.bind(this),this.handleEditCondition=function(){this.isShowSearch(!0)}.bind(this),this.searchCols=[{title:"物料名称",field:"productName",width:120},{title:"采购数量",field:"purchaseamount",width:120},{title:"需求说明",field:"productDesc",width:120},{title:"资质要求",field:"productName",width:120}],this.targetOrg.subscribe(function(e){1===e?this.targetOrgVisible(!1):this.targetOrgVisible(!0)}.bind(this)),this.selectedIds=l.default.computed(function(){return this.invitedSupplyList().map(function(e){return e.id})}.bind(this)),this.serviceArea=[{value:1,label:"能购服务需求组织的供应商"},{value:2,label:"指定组织"}],this.supplyLevelChange=function(e){this.loadLevelList(e)}.bind(this),this.loadSupplyLevelList=function(){this.supplyLevelList.push({value:"1",label:"等级体系1"}),this.supplyLevelList.push({value:"2",label:"等级体系2"})}.bind(this),this.loadLevelList=function(e){e?this.levelDisabled(!1):this.levelDisabled(!0),this.levelList.push({value:"1",label:"等级1"}),this.levelList.push({value:"2",label:"等级2"})}.bind(this),this.loadSupplyLevelList()}var a=i(0),l=_interopRequireDefault(a),n=i(28),s=_interopRequireDefault(n);l.default.components.register("y-fromcategory",{viewModel:init,template:s.default})},function(e,t){e.exports='<style>\n  .iconWY{\n\n  }\n  .iconWY:before{\n    content: \'万元\'\n  }\n  .y-input::-webkit-outer-spin-button, .y-input::-webkit-inner-spin-button{\n    -webkit-appearance: none;\n  }\n</style>\n<div class="row">\n  <y-form params="labelWidth: \'110px\'" data-bind="visible:isShowSearch">\n    <div class="col-md-3">\n      <y-formitem params="label:\'供应商等级体系\'">\n        <y-select params="value:$parentContext.$parent.supplyLevel,clearable:true,dataList:$parentContext.$parent.supplyLevelList,placeholder:\'请选择\',onChange:$parentContext.$parent.supplyLevelChange"></y-select>\n      </y-formitem>\n    </div>\n    <div class="col-md-3" data-bind="visible: !$parent.levelDisabled()">\n      <y-formitem params="label:\'等级\'">\n        <y-select params="multiple:true,multiValue:$parentContext.$parent.levels,dataList:$parentContext.$parent.levelList,placeholder:\'请选择\'"></y-select>\n      </y-formitem>\n    </div>\n    <div class="col-md-12">\n      <y-formitem params="label:\'服务范围\'">\n        <y-radio class="y-inline-block" params="dataList:$parentContext.$parent.serviceArea, value:$parentContext.$parent.targetOrg"></y-radio>\n        <div class="y-inline-block" data-bind="visible:$parentContext.$parent.targetOrgVisible" style="width: 150px"><y-select></y-select></div>\n      </y-formitem>\n    </div>\n    <div class="col-md-3">\n      <y-formitem params="label:\'注册金额\'">\n        <y-input params="value:$parentContext.$parent.registerMoney,placeholder: \'大于\', iconClass:\'iconWY\', type:\'number\'"></y-input>\n      </y-formitem>\n    </div>\n    <div class="col-md-12">\n      <y-formitem params="label:\'资历要求\',style:{height:\'auto\'}">\n        <y-grid params="maxheight:\'auto\',rows: $parentContext.$parent.materialList,columns:$parentContext.$parent.searchCols"></y-grid>\n      </y-formitem>\n    </div>\n    <div class="col-md-3">\n      <y-formitem params="label:\'\'">\n        <y-button params="type:\'primary\',click:$parentContext.$parent.handleSearch">搜索</y-button>\n      </y-formitem>\n    </div>\n  </y-form>\n</div>\n<div class="row" data-bind="visible:!isShowSearch()">\n  <div class="col-sm-10" >\n    <span class="y-text-primary">条件：</span>\n    <span class="y-text-assist" style="margin-left: 20px" >供应商等级体系：</span>\n\n    <y-tag params="text: supplyLevel().label ? supplyLevel().label : \'--\'"></y-tag>\n    <span class="y-text-assist" style="margin-left: 20px" data-bind="visible:levels().length > 0">供应商等级：</span>\n    <span data-bind="foreach:{data:levels, as:\'item\'}">\n      <y-tag params="text: item.label"></y-tag>\n    </span>\n    <span class="y-text-assist" style="margin-left: 20px" >注册金额：</span>\n    <y-tag params="text: function () {return \'>\' + (registerMoney() ? registerMoney() : \'0\') + \'万\'}()"></y-tag>\n  </div>\n  <div class="col-sm-2 text-right">\n    <span class="y-text-link" data-bind="click:handleEditCondition">编辑条件</span>\n  </div>\n  <div class="col-sm-12">\n    <y-grid params="columns:supplyCols,rows:supplyRows"></y-grid>\n  </div>\n</div>\n\n'},function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){}var a=i(0),l=_interopRequireDefault(a),n=i(30),s=_interopRequireDefault(n);l.default.components.register("y-supplylistoper",{viewModel:init,template:s.default})},function(e,t){e.exports='<div>\n  <a href="" class="y-text-link">115/200</a>\n</div>\n'},function(e,t){e.exports='<y-box data-bind="visible:!isShowRefer() && !isShowAssigned()">\n  <y-boxfilter params="title:\'供应商参照交互\'">\n  </y-boxfilter>\n  <y-boxcontent params="title: \'询价页面供应商参照\'">\n    <y-checkbox params="dataList:[{label:\'邀请指定供应商询价\', value:\'1\'}], value: $root.checkboxValue"></y-checkbox>\n    \x3c!-- ko if: $root.checkboxValue().length >= 1 --\x3e\n    <div class="row">\n      <div class="col-sm-2"><span style="line-height: 32px">邀请供应商</span></div>\n      <div class="col-sm-7">\n        <y-form params="labelWidth: \'100px\'">\n          <y-formitem params="label:\'报价范围：\'">\n            <y-radio params="dataList:$root.priceAreaList, value:$root.priceAreaValue"></y-radio>\n          </y-formitem>\n        </y-form>\n      </div>\n      <div class="col-sm-3 text-right" style="line-height: 32px">\n        <a class="y-text-link" data-bind="visible:$root.rows().length>0,click:$root.handleAssignArea">分配报价范围</a>\n        <a class="y-text-link" data-bind="visible:$root.rows().length>0,click:$root.handleInviteSupplier">邀请供应商</a>\n      </div>\n    </div>\n    <y-grid params="ref:\'invitedGrid\',isDataTable:true,maxheight:\'auto\', rows: $root.rows, columns: $root.columns">\n      <div>\n        <y-button params="click:$root.handleSupplyApplyChange">邀请供应商</y-button>\n      </div>\n    </y-grid>\n    \x3c!-- /ko --\x3e\n  </y-boxcontent>\n</y-box>\n<y-box data-bind="visible:isShowRefer">\n  <y-supplychoose params="materialList: $root.MaterialList,invitedSupplyList:$parent.invitedSupplyList, isShowRefer:$parent.isShowRefer"></y-supplychoose>\n</y-box>\n<y-modal params="visible: isShowAssigned, width:\'70%\',errormsg:\'请选择组织\',title:\'分配报价品\'">\n  <y-grid params="maxheight:\'400px\',rows:$root.MaterialList,columns:$root.columnsAssign"></y-grid>\n</y-modal>\n'}]);
//# sourceMappingURL=0.libs.js.map